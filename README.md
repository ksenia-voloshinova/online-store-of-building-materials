# Docke Next.js

###Версии проекта:
```
node - v16.10.0
npm - v7.24.0
```

###Стек проекта:
```
- react
- next.js
- typescript
- react query
- axios
- tailwind, headless
- eslint, prettier
- json-server
```

###Команды проекта:
```
npm run dev - запуск проекта
npm run mock - запуск мокового сервера на node.js
npm run lint - запуск eslint
```
###Запуск проекта (из корня проекта):
1. Установить зависимости фронта
```
npm i
```
2. Создать файл .env и скопировать туда содержимое файла .env.development
3. Создать файл server/.env и скопировать туда содержимое файла server/.env.development
4. Установить зависимости для запуска мокового сервера
```
cd server && npm i
```
4. Запустить моковый сервер, будет доступен на порту 3005
```
npm run mock
```
3. Запустить приложение, будет доступно на порту 80
```
npm run dev
```

###О моковом сервере:
Моковый сервер находится в ./server, написан с помощью json-server,
который под капотом написан на express.js, который обслуживает JSON API :)
json-server позволяет издеваться над API и предоставлять динамический доступ к данным. 
Под динамическим имеется в виду, что можно читать, добавлять, обновлять и удалять данные (GET, POST, PUT, PATCH, DELETE).

Стандартный json-server ссылается на db.json, где поля объекта и есть роуты, 
то есть чтобы получить данные по полю **users** из бд, надо отправить
запрос на **/users**.

Но json-server позволяет маштабировать моковый сервер и создавать кастомные роуты,
что позволяет писать гибкую обработку запросов и далее гибко
тестировать все локально.
Тут для чтения и записи данных в бд используется
библиотека lowdb

Кастомные роуты имеют приоритет над обычными, построенными на полях бд,
поэтому перезаписывают их, если есть совпадения в роутах, если совпадений нет,
то запрос уйдет в бд и отдаст объект по роуту.

###Архитектура проекта:
```
./public/ - изображения
./server/ - моковый сервер
├── db/ - логика запросов, инстанс
│      └── db.json/ - бд
│      └── index.js/ - инициализация бд
│      └── routes.json/ - роуты
├── controllers/ - контроллеры
├── services/ - сервисы, бизнес логика
├── index.js/ - инициализация сервера, роуты
├── ./env.development - переменные окружения
├── ./package.json - зависимости
./src/
├── api/ - логика запросов, инстанс
│      └── api.ts/ - запросы
│      └── instance.ts/ - инстанс axios
│      └── queryKeys.ts/ - уникальные ключи для запросов react-query
├── services/ - сервисы с доп логикой
├── utils/ - переиспользумая логика, константы
├── hooks/ - кастомные хуки
│      └── api/ - логика кешируемых запросов
├── hocs/ - хоки
├── pages/ - страницы (роутинг)
├── views/ - страницы (view)
├── types/ - типы, интерфейсы
├── components/ - компоненты приложения
│      └── form/ - 
│          └── index.tsx
│          └── types.ts
│          └── style.css
├── shared/ - переиспользуемые ресурсы
│      └── UI/ - переиспользуемые UI компоненты
│          └── button/ 
│              └── index.tsx
│              └── types.ts
│              └── style.css
└── styles/ - стили (глобальные)
│      └── global.css
├── store/ - глобальное хранилище
│      └── slices/ - 
│          └── catalogSlice.tsx
./env.development - переменные окружения
./env.local - сюда будут динамически записываться домены с бэка
./.gitignore
./.eslintignore
./.prettierignore
./.eslint.json - конфиг eslint
./.prettierrc - конфиг prettier
./next.config.js - конфиг next
./tailwind.config.js - конфиг tailwind
./postcss.config.js - конфиг postcss для tailwind
./tsconfig.json - конфиг typescript
./package.json - конфиг с зависимостями
./README.md - ридми react проекта
